---
import '@fontsource/inter'
import '@fontsource/playfair-display'
import '../styles/global.css'
import { ViewTransitions } from 'astro:transitions'
import SEO from '../components/SEO.astro'
import { ui } from '../i18n/ui'
import { useTranslations } from '../i18n/utils'

interface Props {
	title: string
	description?: string
	schema?: any
	lang?: string
}

const {
	title,
	description = 'LUNAR Bistro - High-End Dining Experience in Bratislava',
	schema,
	lang = 'sk',
} = Astro.props

const t = useTranslations(lang as keyof typeof ui)
---

<!doctype html>
<html lang={lang} class="scroll-smooth">
	<head>
		<SEO title={title} description={description} jsonLd={schema} />
		<ViewTransitions />
	</head>
	<body
		class="bg-lunar-black text-lunar-white antialiased font-sans selection:bg-lunar-gold selection:text-black"
	>
		<!-- Navigation -->
		<header
			class="fixed top-0 w-full z-50 bg-lunar-black/80 backdrop-blur-md border-b border-white/5 transition-all duration-300"
			id="navbar"
		>
			<div
				class="max-w-7xl mx-auto px-6 h-24 flex justify-between items-center"
			>
				<a
					href={`/${lang}/`}
					class="text-2xl font-serif font-black tracking-widest text-lunar-white hover:text-lunar-gold transition-colors"
				>
					LUNAR<span class="text-lunar-gold">.</span>
				</a>

				<!-- Desktop Menu -->
				<nav
					class="hidden md:flex gap-10 text-xs uppercase tracking-[0.2em] font-medium text-lunar-muted items-center"
				>
					<a
						href="#pribeh"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.story')}</a
					>
					<a
						href="#menu"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.menu')}</a
					>
					<a
						href="#recenzie"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.reviews')}</a
					>
					<a
						href="#galeria"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.gallery')}</a
					>
					<a
						href="#rezervacia"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.reservation')}</a
					>
					<a
						href="#kontakt"
						class="link-underline hover:text-lunar-white transition-colors"
						>{t('nav.contact')}</a
					>

					<!-- Language Switcher -->
					<div class="flex gap-2 ml-4 border-l border-white/10 pl-6">
						<a
							href="/sk/"
							class={`transition-colors hover:text-lunar-white ${lang === 'sk' ? 'text-lunar-gold font-bold' : 'text-lunar-muted'}`}
							>SK</a
						>
						<span class="text-white/10">|</span>
						<a
							href="/en/"
							class={`transition-colors hover:text-lunar-white ${lang === 'en' ? 'text-lunar-gold font-bold' : 'text-lunar-muted'}`}
							>EN</a
						>
					</div>
				</nav>

				<!-- Mobile Menu Button -->
				<div class="flex items-center gap-4 md:hidden">
					<!-- Mobile Lang Switcher (Simplified) -->
					<a
						href={lang === 'sk' ? '/en/' : '/sk/'}
						class="text-xs font-bold text-lunar-gold border border-lunar-gold/30 px-2 py-1 rounded"
					>
						{lang === 'sk' ? 'EN' : 'SK'}
					</a>

					<button id="mobile-menu-btn" class="text-lunar-white p-2">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							class="w-8 h-8"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
							></path>
						</svg>
					</button>
				</div>
			</div>
		</header>

		<!-- Mobile Menu Overlay -->
		<div
			id="mobile-menu-overlay"
			class="fixed inset-0 bg-lunar-black z-40 transform translate-x-full transition-transform duration-500 flex flex-col justify-center items-center gap-8"
		>
			<button
				id="close-menu-btn"
				class="absolute top-8 right-6 text-lunar-white"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="1.5"
					stroke="currentColor"
					class="w-8 h-8"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M6 18L18 6M6 6l12 12"></path>
				</svg>
			</button>
			<a
				href="#pribeh"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.story')}</a
			>
			<a
				href="#menu"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.menu')}</a
			>
			<a
				href="#recenzie"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.reviews')}</a
			>
			<a
				href="#galeria"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.gallery')}</a
			>
			<a
				href="#rezervacia"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.reservation')}</a
			>
			<a
				href="#kontakt"
				class="text-3xl font-serif text-lunar-white hover:text-lunar-gold transition-colors mobile-link"
				>{t('nav.contact')}</a
			>
		</div>

		<!-- Mobile Floating Booking Button -->
		<a
			href="#rezervacia"
			class="transform md:hidden fixed bottom-6 right-6 z-30 bg-lunar-gold text-lunar-black p-4 rounded-full shadow-2xl transition-all duration-300 flex items-center justify-center animate-bounce-slow active:scale-90 active:shadow-inner"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 24 24"
				fill="currentColor"
				class="w-6 h-6"
			>
				<path
					fill-rule="evenodd"
					d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z"
					clip-rule="evenodd"></path>
			</svg>
		</a>

		<slot />

		<footer class="bg-lunar-dark py-8 border-t border-white/5">
			<div
				class="max-w-7xl mx-auto px-6 text-center text-xs text-neutral-600 uppercase tracking-widest"
			>
				&copy; {new Date().getFullYear()} LUNAR Bistro. {
					t('footer.rights')
				}
				<span
					class="block mt-2 md:mt-0 md:inline md:ml-4 text-white/20"
				>
					Designed by <a
						href="https://www.instagram.com/zlidavid/"
						target="_blank"
						rel="noopener noreferrer"
						class="text-white/40 hover:text-lunar-gold transition-colors"
						>DÃ¡vid Zliechovec</a
					>
				</span>
			</div>
		</footer>

		<script>
			// Mobile Menu Logic
			document.addEventListener('astro:page-load', () => {
				const menuBtn = document.getElementById('mobile-menu-btn')
				const closeBtn = document.getElementById('close-menu-btn')
				const overlay = document.getElementById('mobile-menu-overlay')
				const links = document.querySelectorAll('.mobile-link')

				function toggleMenu() {
					overlay?.classList.toggle('translate-x-full')
					document.body.classList.toggle('overflow-hidden')
				}

				menuBtn?.addEventListener('click', toggleMenu)
				closeBtn?.addEventListener('click', toggleMenu)
				links.forEach((link) =>
					link.addEventListener('click', toggleMenu),
				)
			})
		</script>
	</body>
</html>
